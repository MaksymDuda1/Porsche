{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./admin-users.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./admin-users.component.scss?ngResource\";\nimport { CommonModule } from '@angular/common';\nimport { Component } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { UserService } from '../../../services/userService';\nimport { AdminService } from '../../../services/adminService';\nimport { ChangeRoleModel } from '../../../models/changeRoleModel';\nimport { LocalService } from '../../../services/localService';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nlet AdminUsersComponent = class AdminUsersComponent {\n  constructor(userService, adminService, localService, jwtHelperService) {\n    this.userService = userService;\n    this.adminService = adminService;\n    this.localService = localService;\n    this.jwtHelperService = jwtHelperService;\n    this.users = [];\n    this.errorMessage = '';\n    this.currentUserId = '';\n  }\n  changeRole(id) {\n    let changeRole = new ChangeRoleModel();\n    changeRole.id = id;\n    this.adminService.changeRole(changeRole).subscribe(() => {\n      this.userService.getAll().subscribe(data => {\n        this.users = data;\n      }, errorResponse => this.errorMessage = errorResponse.error);\n    }, errorResponse => this.errorMessage = errorResponse.error);\n  }\n  delete(id) {\n    this.userService.delete(id).subscribe(() => {\n      this.userService.getAll().subscribe(data => {\n        this.users = data;\n      }, errroResponse => this.errorMessage = errroResponse.error);\n    }, errorResponse => this.errorMessage = errorResponse.error);\n  }\n  ngOnInit() {\n    let token = this.localService.get(LocalService.AuthTokenName);\n    if (token) {\n      let decodedData = this.jwtHelperService.decodeToken(token);\n      this.currentUserId = decodedData.jti;\n    }\n    this.userService.getAll().subscribe(data => {\n      this.users = data;\n    }, errorResponse => {\n      this.errorMessage = errorResponse.error;\n    });\n  }\n  static #_ = this.ctorParameters = () => [{\n    type: UserService\n  }, {\n    type: AdminService\n  }, {\n    type: LocalService\n  }, {\n    type: JwtHelperService\n  }];\n};\nAdminUsersComponent = __decorate([Component({\n  selector: 'app-admin-users',\n  standalone: true,\n  imports: [CommonModule, RouterModule],\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], AdminUsersComponent);\nexport { AdminUsersComponent };","map":{"version":3,"names":["CommonModule","Component","RouterModule","UserService","AdminService","ChangeRoleModel","LocalService","JwtHelperService","AdminUsersComponent","constructor","userService","adminService","localService","jwtHelperService","users","errorMessage","currentUserId","changeRole","id","subscribe","getAll","data","errorResponse","error","delete","errroResponse","ngOnInit","token","get","AuthTokenName","decodedData","decodeToken","jti","_","__decorate","selector","standalone","imports","template","__NG_CLI_RESOURCE__0"],"sources":["/home/maksi/Studying/Porsche/web-layer/src/app/admin/admin-users/admin-users.component.ts"],"sourcesContent":["import { CommonModule } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { UserService } from '../../../services/userService';\nimport { UserModel } from '../../../models/userModel';\nimport { AdminService } from '../../../services/adminService';\nimport { ChangeRoleModel } from '../../../models/changeRoleModel';\nimport { LocalService } from '../../../services/localService';\nimport { JwtHelperService } from '@auth0/angular-jwt';\n\n@Component({\n  selector: 'app-admin-users',\n  standalone: true,\n  imports: [CommonModule, RouterModule],\n  templateUrl: './admin-users.component.html',\n  styleUrl: './admin-users.component.scss'\n})\nexport class AdminUsersComponent implements OnInit {\n  constructor(private userService: UserService,\n    private adminService: AdminService,\n    private localService: LocalService,\n    private jwtHelperService: JwtHelperService\n  ) {\n\n  }\n\n  users: UserModel[] = [];\n  errorMessage: string = '';\n  currentUserId: string = '';\n\n  changeRole(id: string){\n    let changeRole = new ChangeRoleModel();\n    changeRole.id = id;\n    \n    this.adminService.changeRole(changeRole).subscribe(() => {\n      this.userService.getAll().subscribe(data => {\n        this.users = data;\n      },\n    errorResponse => this.errorMessage = errorResponse.error)\n    },\n  errorResponse => this.errorMessage = errorResponse.error)\n  }\n\n  delete(id: string) {\n    this.userService.delete(id).subscribe(() => {\n      this.userService.getAll().subscribe(data => {\n        this.users = data;\n      },\n        errroResponse => this.errorMessage = errroResponse.error)\n    },\n      errorResponse => this.errorMessage = errorResponse.error)\n  }\n\n  ngOnInit(): void {\n    let token = this.localService.get(LocalService.AuthTokenName);\n    if (token) {\n      let decodedData = this.jwtHelperService.decodeToken(token);\n      this.currentUserId = decodedData.jti;\n    }\n    this.userService.getAll().subscribe(data => {\n      this.users = data;\n    },\n      errorResponse => {\n        this.errorMessage = errorResponse.error;\n      })\n  }\n\n}\n"],"mappings":";;;AAAA,SAASA,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,SAAS,QAAgB,eAAe;AACjD,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,WAAW,QAAQ,+BAA+B;AAE3D,SAASC,YAAY,QAAQ,gCAAgC;AAC7D,SAASC,eAAe,QAAQ,iCAAiC;AACjE,SAASC,YAAY,QAAQ,gCAAgC;AAC7D,SAASC,gBAAgB,QAAQ,oBAAoB;AAS9C,IAAMC,mBAAmB,GAAzB,MAAMA,mBAAmB;EAC9BC,YAAoBC,WAAwB,EAClCC,YAA0B,EAC1BC,YAA0B,EAC1BC,gBAAkC;IAHxB,KAAAH,WAAW,GAAXA,WAAW;IACrB,KAAAC,YAAY,GAAZA,YAAY;IACZ,KAAAC,YAAY,GAAZA,YAAY;IACZ,KAAAC,gBAAgB,GAAhBA,gBAAgB;IAK1B,KAAAC,KAAK,GAAgB,EAAE;IACvB,KAAAC,YAAY,GAAW,EAAE;IACzB,KAAAC,aAAa,GAAW,EAAE;EAJ1B;EAMAC,UAAUA,CAACC,EAAU;IACnB,IAAID,UAAU,GAAG,IAAIZ,eAAe,EAAE;IACtCY,UAAU,CAACC,EAAE,GAAGA,EAAE;IAElB,IAAI,CAACP,YAAY,CAACM,UAAU,CAACA,UAAU,CAAC,CAACE,SAAS,CAAC,MAAK;MACtD,IAAI,CAACT,WAAW,CAACU,MAAM,EAAE,CAACD,SAAS,CAACE,IAAI,IAAG;QACzC,IAAI,CAACP,KAAK,GAAGO,IAAI;MACnB,CAAC,EACHC,aAAa,IAAI,IAAI,CAACP,YAAY,GAAGO,aAAa,CAACC,KAAK,CAAC;IACzD,CAAC,EACHD,aAAa,IAAI,IAAI,CAACP,YAAY,GAAGO,aAAa,CAACC,KAAK,CAAC;EACzD;EAEAC,MAAMA,CAACN,EAAU;IACf,IAAI,CAACR,WAAW,CAACc,MAAM,CAACN,EAAE,CAAC,CAACC,SAAS,CAAC,MAAK;MACzC,IAAI,CAACT,WAAW,CAACU,MAAM,EAAE,CAACD,SAAS,CAACE,IAAI,IAAG;QACzC,IAAI,CAACP,KAAK,GAAGO,IAAI;MACnB,CAAC,EACCI,aAAa,IAAI,IAAI,CAACV,YAAY,GAAGU,aAAa,CAACF,KAAK,CAAC;IAC7D,CAAC,EACCD,aAAa,IAAI,IAAI,CAACP,YAAY,GAAGO,aAAa,CAACC,KAAK,CAAC;EAC7D;EAEAG,QAAQA,CAAA;IACN,IAAIC,KAAK,GAAG,IAAI,CAACf,YAAY,CAACgB,GAAG,CAACtB,YAAY,CAACuB,aAAa,CAAC;IAC7D,IAAIF,KAAK,EAAE;MACT,IAAIG,WAAW,GAAG,IAAI,CAACjB,gBAAgB,CAACkB,WAAW,CAACJ,KAAK,CAAC;MAC1D,IAAI,CAACX,aAAa,GAAGc,WAAW,CAACE,GAAG;IACtC;IACA,IAAI,CAACtB,WAAW,CAACU,MAAM,EAAE,CAACD,SAAS,CAACE,IAAI,IAAG;MACzC,IAAI,CAACP,KAAK,GAAGO,IAAI;IACnB,CAAC,EACCC,aAAa,IAAG;MACd,IAAI,CAACP,YAAY,GAAGO,aAAa,CAACC,KAAK;IACzC,CAAC,CAAC;EACN;EAAC,QAAAU,CAAA,G;;;;;;;;;;AAhDUzB,mBAAmB,GAAA0B,UAAA,EAP/BjC,SAAS,CAAC;EACTkC,QAAQ,EAAE,iBAAiB;EAC3BC,UAAU,EAAE,IAAI;EAChBC,OAAO,EAAE,CAACrC,YAAY,EAAEE,YAAY,CAAC;EACrCoC,QAAA,EAAAC,oBAA2C;;CAE5C,CAAC,C,EACW/B,mBAAmB,CAkD/B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}