{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./login.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./login.component.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { AuthService } from '../../services/authService';\nimport { LocalService } from '../../services/localService';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { LoginModel } from '../../models/auth/loginModel';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nlet LoginComponent = class LoginComponent {\n  constructor(authService, localService, jwtHelperService) {\n    this.authService = authService;\n    this.localService = localService;\n    this.jwtHelperService = jwtHelperService;\n    this.loginModel = new LoginModel();\n    this.errorMessage = \"\";\n  }\n  onLogin() {\n    this.authService.login(this.loginModel).subscribe(data => {\n      this.localService.put(LocalService.AuthTokenName, data);\n      let decodedData = this.jwtHelperService.decodeToken(data);\n      if (decodedData.role == \"Admin\") window.location.href = '/admin';else window.location.href = '/';\n    }, errorResponse => {\n      this.errorMessage = errorResponse.error;\n    });\n  }\n  static #_ = this.ctorParameters = () => [{\n    type: AuthService\n  }, {\n    type: LocalService\n  }, {\n    type: JwtHelperService\n  }];\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  standalone: true,\n  imports: [CommonModule, FormsModule, RouterModule],\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], LoginComponent);\nexport { LoginComponent };","map":{"version":3,"names":["Component","AuthService","LocalService","JwtHelperService","LoginModel","FormsModule","CommonModule","RouterModule","LoginComponent","constructor","authService","localService","jwtHelperService","loginModel","errorMessage","onLogin","login","subscribe","data","put","AuthTokenName","decodedData","decodeToken","role","window","location","href","errorResponse","error","_","__decorate","selector","standalone","imports","template","__NG_CLI_RESOURCE__0"],"sources":["/home/maksi/Studying/Porsche/web-layer/src/app/login/login.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { AuthService } from '../../services/authService';\nimport { LocalService } from '../../services/localService';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { LoginModel } from '../../models/auth/loginModel';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { HttpClientModule } from '@angular/common/http';\n\n@Component({\n  selector: 'app-login',\n  standalone: true,\n  imports: [CommonModule, FormsModule, RouterModule],\n  templateUrl: './login.component.html',\n  styleUrl: './login.component.scss'\n})\nexport class LoginComponent {\n  constructor(private authService: AuthService,\n    private localService: LocalService,\n    private jwtHelperService: JwtHelperService\n  ) { }\n\n  loginModel = new LoginModel();\n  errorMessage = \"\";\n\n  onLogin(){\n    this.authService.login(this.loginModel).subscribe(data => {\n      this.localService.put(LocalService.AuthTokenName, data);\n        let decodedData = this.jwtHelperService.decodeToken(data);\n\n        if(decodedData.role == \"Admin\")\n          window.location.href = '/admin';\n        else\n          window.location.href = '/';\n    },\n    errorResponse => {\n      this.errorMessage = errorResponse.error;\n    })\n  }\n}\n"],"mappings":";;;AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAASC,WAAW,QAAQ,4BAA4B;AACxD,SAASC,YAAY,QAAQ,6BAA6B;AAC1D,SAASC,gBAAgB,QAAQ,oBAAoB;AACrD,SAASC,UAAU,QAAQ,8BAA8B;AACzD,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,YAAY,QAAQ,iBAAiB;AAUvC,IAAMC,cAAc,GAApB,MAAMA,cAAc;EACzBC,YAAoBC,WAAwB,EAClCC,YAA0B,EAC1BC,gBAAkC;IAFxB,KAAAF,WAAW,GAAXA,WAAW;IACrB,KAAAC,YAAY,GAAZA,YAAY;IACZ,KAAAC,gBAAgB,GAAhBA,gBAAgB;IAG1B,KAAAC,UAAU,GAAG,IAAIT,UAAU,EAAE;IAC7B,KAAAU,YAAY,GAAG,EAAE;EAHb;EAKJC,OAAOA,CAAA;IACL,IAAI,CAACL,WAAW,CAACM,KAAK,CAAC,IAAI,CAACH,UAAU,CAAC,CAACI,SAAS,CAACC,IAAI,IAAG;MACvD,IAAI,CAACP,YAAY,CAACQ,GAAG,CAACjB,YAAY,CAACkB,aAAa,EAAEF,IAAI,CAAC;MACrD,IAAIG,WAAW,GAAG,IAAI,CAACT,gBAAgB,CAACU,WAAW,CAACJ,IAAI,CAAC;MAEzD,IAAGG,WAAW,CAACE,IAAI,IAAI,OAAO,EAC5BC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ,CAAC,KAEhCF,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG;IAChC,CAAC,EACDC,aAAa,IAAG;MACd,IAAI,CAACb,YAAY,GAAGa,aAAa,CAACC,KAAK;IACzC,CAAC,CAAC;EACJ;EAAC,QAAAC,CAAA,G;;;;;;;;AAtBUrB,cAAc,GAAAsB,UAAA,EAP1B9B,SAAS,CAAC;EACT+B,QAAQ,EAAE,WAAW;EACrBC,UAAU,EAAE,IAAI;EAChBC,OAAO,EAAE,CAAC3B,YAAY,EAAED,WAAW,EAAEE,YAAY,CAAC;EAClD2B,QAAA,EAAAC,oBAAqC;;CAEtC,CAAC,C,EACW3B,cAAc,CAuB1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}