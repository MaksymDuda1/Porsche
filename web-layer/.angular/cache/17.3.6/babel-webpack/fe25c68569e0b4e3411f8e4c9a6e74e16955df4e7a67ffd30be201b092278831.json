{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./top-menu.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./top-menu.component.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { NavigationEnd, Router, RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { LocalService } from '../../services/localService';\nimport { SidebarComponent } from './sidebar/sidebar.component';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nlet TopMenuComponent = class TopMenuComponent {\n  constructor(localService, jwtHelperService, router) {\n    this.localService = localService;\n    this.jwtHelperService = jwtHelperService;\n    this.router = router;\n    this.isAuthorized = false;\n    this.isAdmin = false;\n    this.currentRoute = '';\n  }\n  ngOnInit() {\n    let token = this.localService.get(LocalService.AuthTokenName);\n    if (token) {\n      this.isAuthorized = true;\n      let decodedData = this.jwtHelperService.decodeToken(token);\n      this.isAdmin = decodedData.isAdmin;\n    }\n    this.router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        this.currentRoute = event.url;\n      }\n    });\n  }\n  onExit() {\n    this.isAuthorized = false;\n    this.localService.remove(LocalService.AuthTokenName);\n    window.location.href = '/login';\n  }\n  static #_ = this.ctorParameters = () => [{\n    type: LocalService\n  }, {\n    type: JwtHelperService\n  }, {\n    type: Router\n  }];\n};\nTopMenuComponent = __decorate([Component({\n  selector: 'app-top-menu',\n  standalone: true,\n  imports: [CommonModule, RouterModule, SidebarComponent],\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], TopMenuComponent);\nexport { TopMenuComponent };","map":{"version":3,"names":["Component","NavigationEnd","Router","RouterModule","CommonModule","LocalService","SidebarComponent","JwtHelperService","TopMenuComponent","constructor","localService","jwtHelperService","router","isAuthorized","isAdmin","currentRoute","ngOnInit","token","get","AuthTokenName","decodedData","decodeToken","events","subscribe","event","url","onExit","remove","window","location","href","_","__decorate","selector","standalone","imports","template","__NG_CLI_RESOURCE__0"],"sources":["/home/maksi/Studying/Porsche/web-layer/src/app/top-menu/top-menu.component.ts"],"sourcesContent":["import { Component, Inject, OnInit, PLATFORM_ID } from '@angular/core';\nimport { NavigationEnd, Router, RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { LocalService } from '../../services/localService';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { SidebarComponent } from './sidebar/sidebar.component';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { decode } from 'punycode';\n\n@Component({\n  selector: 'app-top-menu',\n  standalone: true,\n  imports: [CommonModule, RouterModule, SidebarComponent],\n  templateUrl: './top-menu.component.html',\n  styleUrl: './top-menu.component.scss'\n})\nexport class TopMenuComponent implements OnInit {\n  constructor(private localService: LocalService,\n    private jwtHelperService: JwtHelperService,\n    private router: Router,\n) { }\n\n  isAuthorized: boolean = false;\n  isAdmin: boolean = false;\n  currentRoute: string = '';\n\n  ngOnInit(): void {\n    let token = this.localService.get(LocalService.AuthTokenName);\n\n    if (token)\n      {\n        this.isAuthorized = true;\n        let decodedData = this.jwtHelperService.decodeToken(token);\n        this.isAdmin = decodedData.isAdmin;\n      }\n    this.router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        this.currentRoute = event.url;\n      }\n    });\n  }\n\n  onExit() {\n    this.isAuthorized = false;\n    this.localService.remove(LocalService.AuthTokenName);\n    window.location.href = '/login';\n  }\n}\n"],"mappings":";;;AAAA,SAASA,SAAS,QAAqC,eAAe;AACtE,SAASC,aAAa,EAAEC,MAAM,EAAEC,YAAY,QAAQ,iBAAiB;AACrE,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,YAAY,QAAQ,6BAA6B;AAE1D,SAASC,gBAAgB,QAAQ,6BAA6B;AAC9D,SAASC,gBAAgB,QAAQ,oBAAoB;AAU9C,IAAMC,gBAAgB,GAAtB,MAAMA,gBAAgB;EAC3BC,YAAoBC,YAA0B,EACpCC,gBAAkC,EAClCC,MAAc;IAFJ,KAAAF,YAAY,GAAZA,YAAY;IACtB,KAAAC,gBAAgB,GAAhBA,gBAAgB;IAChB,KAAAC,MAAM,GAANA,MAAM;IAGhB,KAAAC,YAAY,GAAY,KAAK;IAC7B,KAAAC,OAAO,GAAY,KAAK;IACxB,KAAAC,YAAY,GAAW,EAAE;EAJvB;EAMFC,QAAQA,CAAA;IACN,IAAIC,KAAK,GAAG,IAAI,CAACP,YAAY,CAACQ,GAAG,CAACb,YAAY,CAACc,aAAa,CAAC;IAE7D,IAAIF,KAAK,EACP;MACE,IAAI,CAACJ,YAAY,GAAG,IAAI;MACxB,IAAIO,WAAW,GAAG,IAAI,CAACT,gBAAgB,CAACU,WAAW,CAACJ,KAAK,CAAC;MAC1D,IAAI,CAACH,OAAO,GAAGM,WAAW,CAACN,OAAO;IACpC;IACF,IAAI,CAACF,MAAM,CAACU,MAAM,CAACC,SAAS,CAACC,KAAK,IAAG;MACnC,IAAIA,KAAK,YAAYvB,aAAa,EAAE;QAClC,IAAI,CAACc,YAAY,GAAGS,KAAK,CAACC,GAAG;MAC/B;IACF,CAAC,CAAC;EACJ;EAEAC,MAAMA,CAAA;IACJ,IAAI,CAACb,YAAY,GAAG,KAAK;IACzB,IAAI,CAACH,YAAY,CAACiB,MAAM,CAACtB,YAAY,CAACc,aAAa,CAAC;IACpDS,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;EACjC;EAAC,QAAAC,CAAA,G;;;;;;;;AA9BUvB,gBAAgB,GAAAwB,UAAA,EAP5BhC,SAAS,CAAC;EACTiC,QAAQ,EAAE,cAAc;EACxBC,UAAU,EAAE,IAAI;EAChBC,OAAO,EAAE,CAAC/B,YAAY,EAAED,YAAY,EAAEG,gBAAgB,CAAC;EACvD8B,QAAA,EAAAC,oBAAwC;;CAEzC,CAAC,C,EACW7B,gBAAgB,CA+B5B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}